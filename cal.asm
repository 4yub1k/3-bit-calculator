LIST P=PIC18F452,F=INHX32,N=0,ST=OFF,R=HEX ;CODE BY SALAHUDDIN
#include<P18F452.INC>
CONFIG OSC=HS,OSCS=OFF,WDT=OFF,BORV=45,PWRT=ON,BOR=ON,DEBUG=OFF,LVP=OFF,STVR=OFF
ORG 0x00
SETF TRISD
CLRF TRISB
MOVFF PORTD,25H
;MOVLW B'10111011' ;TESTING WITHOUT SWITCHS
;MOVWF 21H
;MOVFF PORTD,PORTB
;MOVFF 21H,25H
MOVF 25H,W
;------------------------------------------------------------------------------------------
MOVLW B'00000000';ADD
MOVWF 31H
;------------------------------------------------------------------------------------------
MOVLW B'01000000';SUB
MOVWF 30H
;------------------------------------------------------------------------------------------
MOVLW B'10000000';MUL
MOVWF 29H
;------------------------------------------------------------------------------------------
MOVLW B'11000000';DIVIDE
MOVWF 26H
;------------------------------------------------------------------------------------------
MOVFF 25H,28H
MOVF 25H,W
ANDLW B'11000000'
CPFSEQ 26H
BRA NEXT1
BRA DIVIDE

NEXT1
MOVF 25H,W
ANDLW B'10000000'
CPFSEQ 29H
GOTO NEXT2
GOTO MULI
NEXT2
MOVF 25H,W
ANDLW B'01000000'
CPFSEQ 30H
GOTO NEXT3
GOTO SUBT
NEXT3
MOVF 25H,W
ANDLW B'00000000'
CPFSEQ 31H
GOTO ADDI

ADDI
RRNCF 25H ;SHIFT IT LOWER IF NOT 30 INSTEAD OF 03,
RRNCF 25H
RRNCF 25H
MOVF 25H,W
ANDLW B'00000111'
MOVWF 27H
MOVF 28H,W ;ALREADY AT LOWER
ANDLW B'00000111'
ADDWF 27H,F
MOVFF 27H,PORTB
BRA EXIT

SUBT
RRNCF 25H ;SHIFT IT LOWER IF NOT 30 INSTEAD OF 03,
RRNCF 25H
RRNCF 25H
MOVF 25H,W
ANDLW B'00000111'
MOVWF 27H
MOVF 28H,W ;ALREADY AT LOWER
ANDLW B'00000111'
SUBWF 27H,F
MOVFF 27H,PORTB
BRA EXIT

MULI
COUNT EQU 27H
COUNT2 EQU 28H
RRNCF 25H ;SHIFT IT LOWER IF NOT 30 INSTEAD OF 03,
RRNCF 25H
RRNCF 25H
MOVF 25H,W
ANDLW B'00000111'
MOVWF 27H
MOVFF 27H,32H
MOVFF 27H,33H
MOVF 28H,W ;ALREADY AT LOWER
ANDLW B'00000111'
MOVWF 28H

MOVLW 0H
AGAIN
ADDWF COUNT,W
DECFSZ COUNT2,F
GOTO AGAIN

MOVWF 27H
MOVFF 27H,PORTB
BRA EXIT

DIVIDE
RRNCF 25H ;SHIFT IT LOWER IF NOT 30 INSTEAD OF 03,
RRNCF 25H
RRNCF 25H
MOVF 25H,W
ANDLW B'00000111' ;DIVIDEND
MOVWF 27H
MOVF 28H,W ;ALREADY AT LOWER
ANDLW B'00000111' ;DIVISOR
MOVWF 28H
CLRF 34H
UP2
INCF 34H,F
SUBWF 27H,F
BC UP2
DECF 34H,F
;ADDWF 27H,F
MOVFF 34H,PORTB
BRA EXIT

EXIT
END
